# 2. Request-Reply and Java UDP
_07/02/23_
[MoodlePDF](https://moodle.nottingham.ac.uk/pluginfile.php/9364061/mod_page/content/1/03%20Request-Reply%20and%20UDP.pdf)
## Introduction
- Network protocol - Set of rules on how to communicate. If everyone follows the same rules then effective communication is achieved
- Distributed System Challenges - Common challenges consist of
	- **Heterogeneity** - coping with system component variability
	- **Failure Handing** - Coping with partial failure
	- **Concurrency** - Correctness and performance with concurrency
	- Openness - To extension or reproduction
	- Security - Protection form threats
	- Transparency - Selective abstraction
	- Quality of Service - Performance & other non-functional characteristics

### Heterogeneity
- All the parts of a distributed system has to work together, even if they are different
- Will mean using common protocols, interfaces and encoding 
- E.g. Java Data IO Streams

### Failure Handling
- Can fail in complicated ways, (different parts can fail at different times)
- Coping with failure typically requires some level of redundancy, and specific means detecting and responding to partial failures
- E,g, simple TCP server

### Concurrency
- The different processes in a distributed system normally run concurrently
- This may requires additional checks and communication to ensure global consistency
- Use alternative approaches with weaker consistency
- E.g. The example TCP server is multi-threaded so that it can serve multiple independent clients concurrently
## Request-reply Protocols
- Within the client, the server needs to be identified by a remote reference; IP, port, optional additional process-internal identifiers.
- Server may support several different operations
- Client and server must agree on how arguments are encoded
- Client normally blocks until the response is received. Protocols can be reply-less(one-way) or asynchronous (reply is read by the client and later operated on)

![](../_resources/Pasted%20image%2020230207112507.png)
UDP Request - Only know if its been successful if you receive a response. Don't know if the response or reply got lost etc. Can set a timer to resend out request incase it got lost.

### TCP vs UDP
| TCP                             | UDP                         |
| ------------------------------- | --------------------------- |
| Establish connection first      | No connection overhead      |
| Request/reply = stream of bytes | Request/reply = 1 message   |
| No size limit                   | Few KB                      |
| Reliably delivered in order     | May be lost or out of order |
| HTTP, SMTP                      | DNS, DHCP                   |

## Java UDP Programming
- `DatagramPacket` - Representing a UDP datagram
- `DatagramSocket` - Representing a UDP socket

### UDP Considerations
Message Size - Hard limit of 65508 bytes, but often 8k or less
## Java Data Encoding
TCP - Sequence of bytes
UDP - Array of bytes