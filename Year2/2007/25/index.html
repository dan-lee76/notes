<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Year2/2007/25">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">25. Revision | Nottes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://notes.danlee.uk/Year2/2007/25"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="25. Revision | Nottes"><meta data-rh="true" name="description" content="Computer Design"><meta data-rh="true" property="og:description" content="Computer Design"><link data-rh="true" rel="icon" href="/img/nottsYell.png"><link data-rh="true" rel="canonical" href="https://notes.danlee.uk/Year2/2007/25"><link data-rh="true" rel="alternate" href="https://notes.danlee.uk/Year2/2007/25" hreflang="en"><link data-rh="true" rel="alternate" href="https://notes.danlee.uk/Year2/2007/25" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Nottes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Nottes Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.74c7ce81.css">
<link rel="preload" href="/assets/js/runtime~main.33dbd15c.js" as="script">
<link rel="preload" href="/assets/js/main.b4c045b6.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/nottsBlue.svg" alt="Nottes Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/nottsYell.svg" alt="Nottes Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Nottes</b></a><a class="navbar__item navbar__link" href="/Year1">Year 1</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Year2/">Year 2</a><a class="navbar__item navbar__link" href="/ITST/">Tech Support</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/nottsBlue.svg" alt="Nottes Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/nottsYell.svg" alt="Nottes Logo" class="themedImage_ToTc themedImage--dark_i4oU"><b>Nottes</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Year2/2002/00">2002</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/Year2/2007/00">2007</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/00">0. Introduction to Operating systems and Concurrency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/01">1. Introduction (2)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/02">2. Processes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/03">3. Process Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/04">4. Threads</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/05">5. Process Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/06">6. Concurrency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/07">7. Concurrency (2)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/08">8. Mutexs &amp; Stemaphores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/09">9. Bounded buffer &amp; dining philosophers problem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/10">10.   Parallel dining philosophers &amp; Readers/writers problem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/11">11. Readers/writers problem(2)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/12">12. Memory Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/13">13. Memory Management 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/14">14. Dynamic Partitioning &amp; Paging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/15">15. Paging &amp; Virtual Memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/16">16. Virtual Memory &amp; Page Replacement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/17">17. Page Replacement, Working/Resident Threads &amp; Thrashing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/18">18. Disk Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/19">19.  User &amp; Implementation view of file systems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/20">20. File System Implementations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/21">21. I-Nodes &amp; File Systems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/22">22. File System Recovery &amp; Defag</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/23">23. Virtualisation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Year2/2007/24">24.  Virtualisation &amp; the Cloud</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Year2/2007/25">25. Revision</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Year2/2009/00">2009</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Year2/2013/00">2013</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Year2/Misc/Industry">Misc</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Year2/">Year 2</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">2007</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">25. Revision</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>25. Revision</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="computer-design">Computer Design<a class="hash-link" href="#computer-design" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="registers">Registers<a class="hash-link" href="#registers" title="Direct link to heading">​</a></h3><ul><li><strong>Data Registers</strong> - Any sort of data for special functions. </li><li><strong>Program Counter-</strong> Holds the next instruction.</li><li><strong>Program status word</strong>  - admin, stores the mode bit. Which mode the CPU is in, kernel mode or user mode.</li><li><strong>User Mode</strong> - Direct access to a subset of instructions the CPU can carry out</li><li><strong>Kernel mode</strong> - Access to the full set of instructions. Including privileged memory locations. </li><li>Normally compiler decides which mode to use</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="memory-management-unit">Memory Management Unit<a class="hash-link" href="#memory-management-unit" title="Direct link to heading">​</a></h3><p><em>Location of an address</em>
Doesn&#x27;t know where in memory an executable will run. Variables require memory, they need to have a memory space</p><ul><li><strong>Logic Address Space</strong> -  Used by the processor and the compiler (starts at 0). What you use when you write code. Every process has one <!-- -->[0,MAX^64]<!-- --> </li><li><strong>Physical Address Space</strong> - Seen by the hardware/OS <!-- -->[0,MAX]<!-- --> (Determined by the amount of physical memory)
Also responsible for address translation <code>physical = locgical + x</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="moors-law">Moors Law<a class="hash-link" href="#moors-law" title="Direct link to heading">​</a></h3><blockquote><p><strong>Moore&#x27;s law</strong> - The number of transistors on an integrated circuit doubles roughly every two years. </p></blockquote><p>Closely linked but necessarily related to performance.
Still continuing but the power wall slows performance improvements of single core
Can extract parallelism automatically, can implement it at the lowest level</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="multi-core-hyper-threaded-processors">Multi-core, hyper-threaded processors<a class="hash-link" href="#multi-core-hyper-threaded-processors" title="Direct link to heading">​</a></h3><p>Evolution in hardware has implications on OS design
The process scheduling needs to account for load balancing and CPU affinity. Need to decide <strong>when</strong> and <strong>where</strong> it is going to run</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="micro-kernels">Micro Kernels<a class="hash-link" href="#micro-kernels" title="Direct link to heading">​</a></h3><p>All non-essential functionality is extracted from the kernel. These are easier to extend, more portable and more reliable.
Frequent system calls cause mode switches/overhead</p><p><strong>Monolithic Systems</strong> - All procedures into one single executable running in kernel mode. However, they are difficult to maintain. Current versions of Windows, and Linux are implemented as this.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduction-to-processes">Introduction to processes<a class="hash-link" href="#introduction-to-processes" title="Direct link to heading">​</a></h2><p>Running instance of a program. This has &#x27;control structures&#x27; - they store all the necessary information related to the management of the process</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="context-switching">Context Switching<a class="hash-link" href="#context-switching" title="Direct link to heading">​</a></h3><p>Process control box contains:</p><ul><li><strong>Process identification</strong> (PID, UID, Parent PID)</li><li><strong>Process control information</strong> (process state, scheduling information)</li><li><strong>Process state information</strong> (user registers, program counter, stack pointer, program status word, memory management information, files)
The <strong>process control block</strong> is <strong>necessary</strong> for <strong>context switching</strong> in <strong>multi-programmed systems</strong>
Process control blocks are kernel data structures, which are stored in the <strong>process table</strong> and are accessible in the <strong>kernel mode</strong> only (system calls), otherwise this would compromise their integrity.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="multi-programming">Multi-Programming<a class="hash-link" href="#multi-programming" title="Direct link to heading">​</a></h4><p>Achieved by alternating processes and context switching</p><ul><li>Single processor systems results in concurrent execution</li><li>True parallelism requires multiple processors</li></ul><p>Slow time slices - good response times, low utilisation
Long time slices - poor response times, better utilisation</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="process">Process<a class="hash-link" href="#process" title="Direct link to heading">​</a></h4><p>Memory image contains: the program (shared) code, data segment (stack/heap)
Every process has own logical address space
Some OS address space layout are randomised </p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="process-implementation">Process implementation<a class="hash-link" href="#process-implementation" title="Direct link to heading">​</a></h3><p>Information about the status of &quot;resources&quot; is maintained in tables. These are in kernel space and cross referenced</p><ul><li><strong>Process tables</strong> - process control blocks</li><li><strong>Memory tables</strong> - memory allocation, protection, virtual memory </li><li><strong>I/O tables</strong> - Availability, status, transfer information</li><li><strong>File tables</strong> - Location, status</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="states-and-transitions">States and Transitions<a class="hash-link" href="#states-and-transitions" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="/assets/images/20221007111037-7da3e50e02a7213e1f6b3b47a20902e1.png" width="929" height="454" class="img_ev3q"></p><ul><li><strong>New</strong> process has just been created and is waiting to be admitted</li><li><strong>Ready</strong> process is waiting for the CPU to become available</li><li><strong>Running</strong> process &#x27;owns&#x27; the CPU</li><li><strong>Blocked</strong> process cannot continue (waiting for IO)</li><li><strong>Terminated</strong> process is no longer executable</li><li><strong>Suspended</strong> process is swapped out</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="system-calls">System Calls<a class="hash-link" href="#system-calls" title="Direct link to heading">​</a></h3><ul><li>True system calls are &quot;wrapped&quot; in the OS libraries following a well defined interface</li><li>These are necessary to notify the OS that the process has terminated</li><li><code>fork()</code> - creates an exact copy of the current process</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="process-scheduling">Process Scheduling<a class="hash-link" href="#process-scheduling" title="Direct link to heading">​</a></h2><ul><li>New -&gt; ready: when to admit processes to the system</li><li>Ready -&gt; running: decide which process to run next</li><li>Running -&gt; ready: when to interrupt process</li><li><strong>Scheduler</strong> - decides which process to run next</li><li><strong>Type of operating system</strong> - determines which algorithms are appropriate</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="time-horizon">Time Horizon<a class="hash-link" href="#time-horizon" title="Direct link to heading">​</a></h3><ul><li><strong>Long term</strong> - admits new processes and controls the degree of multi programming. Good mix of CPU and IO bound processes. Usually absent in popular modern </li><li><strong>Medium term</strong> - controls swapping. Looks to see how busy the system currently is. </li><li><strong>Short term</strong> - which process to run next. Manages the ready queue, runs frequently (must be fast). Called following clock interrupts or blocking system calls.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="process-schedulers">Process Schedulers<a class="hash-link" href="#process-schedulers" title="Direct link to heading">​</a></h3><ul><li><strong>Non-Preemptive</strong> - Processes are interrupted voluntarily</li><li><strong>Preemptive</strong> - Processes are interrupted forcefully or voluntarily. Requires context switches. Prevents process from monopolising the CPU. Most popular OS are preemptive</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="performance-assessment">Performance Assessment<a class="hash-link" href="#performance-assessment" title="Direct link to heading">​</a></h3><ul><li>User Oriented Criteria<ul><li><strong>Response time</strong>: time between creating the job and its first execution</li><li><strong>Turnaround time</strong>: time between creating the job and finishing it</li><li><strong>Predictability</strong>: variance in processing times</li></ul></li><li>System oriented criteria:<ul><li>Throughput: number of jobs processed per hour</li><li>Fairness: Equally distributed processing.</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scheduling-algorithms">Scheduling Algorithms<a class="hash-link" href="#scheduling-algorithms" title="Direct link to heading">​</a></h3><table><thead><tr><th>Algorithm</th><th>Concept</th><th>Advantage</th><th>Disadvantage</th></tr></thead><tbody><tr><td>First Come First Served/First in First out</td><td>Non-preemptive algorithm that operates as a strict queuing mechanism.</td><td>Positional fairness an easy to implement</td><td>Favours long processes over short ones. Could compromise resource utilisation.</td></tr><tr><td>Shortest Job First</td><td>A non-preemptive algorithm that starts processes in order of ascending processing time</td><td>Always result in the optimal turnaround time</td><td>Starvation might occur. Fairness and predictability are compromised. Processing times have to be known beforehand</td></tr><tr><td>Round Robin</td><td>A preemptive version of FCFS. Processes run in the order they were added but they only get a max amount of time at once. Forces context switches at periodic intervals</td><td>Improved response time. Effective for general purpose interactive/time sharing systems</td><td>Increased context switching and overhead. Favours CPU bound processes over IO. Can reduce to FCFS.</td></tr><tr><td>Priority Queue</td><td>A preemptive algorithm that schedules processes by priority. Round robin is used within the same priority levels. Saved by the process control block</td><td>Can priorities IO bound jobs</td><td>Low priority may suffer from starvation</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="threads">Threads<a class="hash-link" href="#threads" title="Direct link to heading">​</a></h2><ul><li><strong>Resources</strong> - All related resources are grouped together</li><li><strong>Execution trace</strong> - entity that gets executed</li><li>A process can share its resources between multiple execution traces/threads</li></ul><p>Every thread has its own execution context &amp; thread control block, however they all have access to the processes shared resources.
Execution of a process has states (new, running, blocked, read, terminated)</p><table><thead><tr><th>Shared Resources (Processes)</th><th>Private Resources (Threads)</th></tr></thead><tbody><tr><td>Address space</td><td>Program Counter</td></tr><tr><td>Global variables</td><td>Registers</td></tr><tr><td>Open files</td><td>Stack</td></tr><tr><td>Child processes</td><td>State</td></tr><tr><td>Pending alarms</td><td>Local vars</td></tr><tr><td>Signals and signal handling</td><td></td></tr><tr><td>Accounting information</td><td></td></tr></tbody></table><p>Threads incur less overhead to create/terminate/switch
Hyper threaded cores have hardware support for multi-threading</p><ul><li><strong>Inter-thread communication</strong>: Easier/faster than <strong>interprocess</strong> communication (memory is shared)</li><li><strong>No protection boundaries</strong>: Required in the address space (threads are cooperating, belong to the same user, and have a common goal)</li><li><strong>Synchronisation</strong>: Has to be considered carefully</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="reason-to-use-threads">Reason to use threads<a class="hash-link" href="#reason-to-use-threads" title="Direct link to heading">​</a></h3><ul><li>Processes will often contain multiple blocking tasks (IO operations &amp; memory access page faults)</li><li>Some activities should be carried out in parallel/concurrently such as webservers, msoffice etc</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="user-threads">User Threads<a class="hash-link" href="#user-threads" title="Direct link to heading">​</a></h3><p><em>Many-to-One</em></p><ul><li>Thread management is executed in user space with the help of a user library</li><li>Process maintains a thread table, managed by the runtime system without the kernels knowledge.</li><li>Kernel can see 1 process, but user space can see multiple</li><li>Advantages - Full control over the thread scheduler, OS independent and in user space</li><li>Disadvantages - Blocking system calls suspend the entire process (can be cause by page faults), no true parallelism, clock interrupts don&#x27;t exist.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="kernel-threads">Kernel Threads<a class="hash-link" href="#kernel-threads" title="Direct link to heading">​</a></h3><p><em>One-to-One</em></p><ul><li>Kernel manages threads, user access them through system calls. Thread table is maintained by the kernel. If a thread blocks, the kernel chooses thread</li><li>Advantages - True parallelism, no run-time needed</li><li>Frequent mode switches take place (performance)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h3><ul><li><strong>Null fork</strong> - the overhead is creating, scheduling, running and terminating a null process/thread</li><li><strong>Signal wait</strong> - overhead is synchronising threads</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hybrid-implementations">Hybrid Implementations<a class="hash-link" href="#hybrid-implementations" title="Direct link to heading">​</a></h3><ul><li>User threads are multiplexed onto kernel threads</li><li>Kernel sees and schedules the kernel threads</li><li>User applications sees user threads and creates/schedules these</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="thread-management">Thread Management<a class="hash-link" href="#thread-management" title="Direct link to heading">​</a></h3><ul><li>Libraries are either user space or based on system calls</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="process-scheduling-1">Process Scheduling<a class="hash-link" href="#process-scheduling-1" title="Direct link to heading">​</a></h2><p>Characteristics of feedback queues include; number of queues, scheduling algorithms, migration policy and initial access. These queues are highly configurable.</p><ul><li><strong>Real time</strong> - processes/threads have a fixed priority level</li><li><strong>Variable</strong> - processes/threads can have their priorities boosted temporarily
Priorities are based on the process base priority(0-15) and thread base priority (+-2 relative to the process priority)
Threads priority dynamically changes during execution. (between base and max priority)</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="completely-fair-scheduler">Completely fair scheduler<a class="hash-link" href="#completely-fair-scheduler" title="Direct link to heading">​</a></h3><p>Linux has Real time tasks, FIFO and Round Robin, and Time sharing tasks using a preemptive approach.
Real time FIFO takes highest priority, and preemption if a higher priority shows up
Real time round robin tasks are preemptable by clock interrupts and have a time slice associated with them. </p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="equal-priority">Equal priority<a class="hash-link" href="#equal-priority" title="Direct link to heading">​</a></h4><p>CFS divides the CPU time between all processes/threads. If all <em>N</em> have same priority, they will be allocated a time slice. The length of the time slice are based on the targeted latency. If <em>N</em> is very large, the context switch time will be dominant, and a lower bound on the time slice.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="different-priority">Different priority<a class="hash-link" href="#different-priority" title="Direct link to heading">​</a></h4><p>A weighing scheme is used to take different priorities into account. If different priority,  then every <em>i</em> is allocated a weight <em>w</em> that reflects its priority. The tasks with the lowest proportional amount of used CPU time are selected first</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="multi-processor-scheduling">Multi-processor scheduling<a class="hash-link" href="#multi-processor-scheduling" title="Direct link to heading">​</a></h3><ul><li><strong>Single Processor</strong> machine - Which process(thread) to run next</li><li><strong>Shared Queues</strong> - Single or multi-level shared between all CPUs. + Automatic load balancing. - Contention for the queues (locking if needed), does not account for processor affinity</li><li><strong>Private Queues</strong> - Each CPU has a private set of queues. + CPU affinity is automatically satisfied, contention for shared queues minimised. - Less load balancing, push and pull migration between CPUs is required</li><li><strong>Related Threads</strong> - Multiple threads that communicate with one another and ideally run together (search algorithm)</li><li><strong>Unrelated Threads</strong> - Processes threads that are independent, possibly started by different users running different programs</li><li>Working together - Aim is to get threads running, as much as possible, at same time across multiple CPUs</li><li><strong>Space Scheduling</strong> - Number <em>N</em> can be dynamically adjusted to match processor capacity</li><li><strong>Gang Scheduling</strong> - Time slices are synchronised and the scheduler groups threads together to run simultaneously. Preemptive algorithm, blocking threads result in idle CPUs</li></ul><hr><p><em>This is where Dan the retard compresses his notes instead of &#x27;shortening&#x27; them</em></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="concurrency">Concurrency<a class="hash-link" href="#concurrency" title="Direct link to heading">​</a></h2><ul><li>Threads/processes execute concurrently and share resources. These can be interrupted at any point. Process state is saved in the process control block.</li><li>Outcomes of programs are unpredictable. Sharing data leads to inconsistencies. </li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="race-conditions">Race Conditions<a class="hash-link" href="#race-conditions" title="Direct link to heading">​</a></h3><ul><li>Occurs when multiple threads/processes access shared data and same time.</li><li>Mechanisms such as semaphores and mutexes can prevent this.</li><li>OS must make sure that interactions within the OS do not result in race conditions<ul><li>Must provide locking mechanisms to implement/support mutual exclusions and prevent starvation/deadlocks</li></ul></li></ul><p><strong>Critical Section</strong> - Set of instructions in which shared resources between processes/threads are changed. Only one can access it at once, so need to ensure it gets locked whilst in use. Solutions must allow process to enter it as some point, and ensure there is fairness within the program.</p><p><strong>Mutual Exclusion</strong> - Must be enforced for critical sections. Processes need to get permissions before entering critical section. Solutions can be software based (Peterson solution), hardware, mutexes/semaphores, monitors. Deadlocks also need to be prevented</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="deadlocks">Deadlocks<a class="hash-link" href="#deadlocks" title="Direct link to heading">​</a></h3><blockquote><p>Set of p/t is deadlocked if each p/t in the set is waiting for an event that only the other p/t in the set can access</p></blockquote><p>Mutexes can cause deadlocks. <strong>All</strong> four conditions must hold for deadlocks to occur</p><ol><li><strong>Mutual exclusion</strong>: a resource can be assigned to at most one process at a time</li><li><strong>Hold and wait condition</strong>: a resource can be held whilst requesting new resources</li><li><strong>No preemption</strong>: resources cannot be forcefully taken away from a process</li><li><strong>Circular wait</strong>: there is a circular chain of two or more processes, waiting for a resource held by the other processes.</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="petersons-solution">Peterson&#x27;s Solution<a class="hash-link" href="#petersons-solution" title="Direct link to heading">​</a></h3><ul><li><strong>Software Solution</strong> - Worked well on older machines. Two shared variables are used <code>turn</code> (next in critical section) and <code>boolean flag[2]</code>(process is read to enter the critical section.<a href="/Year2/2007/07#Peterson&#x27;s_Solution">Code</a></li><li><strong>Mutual Exclusion Requirement</strong> - Satisfies all critical section requirements. Only want one process on the thread accessing the critical section at once</li><li><strong>Progress Requirement</strong> - Any process must be able to enter its critical section at some point in time.</li><li><strong>Fairness/bound waiting</strong> - Fairly distributed waiting times/processes cannot be made to wait indefinitely</li></ul><p><strong>Disabling Interrupts</strong> - Disable whilst executing a critical section and prevent interrupts. May be appropriate on single CPU machine. Insufficient on modern machines</p><p><strong>Atomic Instructions</strong> - Implement <code>test_and_set()</code> and <code>swap_and_compare()</code> instructions as a set of atomic (= uninterruptible) instructions. Reading and setting is done as one complete instruction. If called simultaneously, they will be executed sequentially.</p><p><strong>Mutual Exclusion</strong> - <code>test_and_set()</code> and <code>swap_and_compare()</code> are hardware instructions and not directly accessible to the user. Other disadvantages include busy waiting, and deadlocks</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Year2/2007/24"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">24.  Virtualisation &amp; the Cloud</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Year2/2009/00"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">0. Introduction to Algorithms Correctness and Efficiency</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#computer-design" class="table-of-contents__link toc-highlight">Computer Design</a><ul><li><a href="#registers" class="table-of-contents__link toc-highlight">Registers</a></li><li><a href="#memory-management-unit" class="table-of-contents__link toc-highlight">Memory Management Unit</a></li><li><a href="#moors-law" class="table-of-contents__link toc-highlight">Moors Law</a></li><li><a href="#multi-core-hyper-threaded-processors" class="table-of-contents__link toc-highlight">Multi-core, hyper-threaded processors</a></li><li><a href="#micro-kernels" class="table-of-contents__link toc-highlight">Micro Kernels</a></li></ul></li><li><a href="#introduction-to-processes" class="table-of-contents__link toc-highlight">Introduction to processes</a><ul><li><a href="#context-switching" class="table-of-contents__link toc-highlight">Context Switching</a></li><li><a href="#process-implementation" class="table-of-contents__link toc-highlight">Process implementation</a></li><li><a href="#states-and-transitions" class="table-of-contents__link toc-highlight">States and Transitions</a></li><li><a href="#system-calls" class="table-of-contents__link toc-highlight">System Calls</a></li></ul></li><li><a href="#process-scheduling" class="table-of-contents__link toc-highlight">Process Scheduling</a><ul><li><a href="#time-horizon" class="table-of-contents__link toc-highlight">Time Horizon</a></li><li><a href="#process-schedulers" class="table-of-contents__link toc-highlight">Process Schedulers</a></li><li><a href="#performance-assessment" class="table-of-contents__link toc-highlight">Performance Assessment</a></li><li><a href="#scheduling-algorithms" class="table-of-contents__link toc-highlight">Scheduling Algorithms</a></li></ul></li><li><a href="#threads" class="table-of-contents__link toc-highlight">Threads</a><ul><li><a href="#reason-to-use-threads" class="table-of-contents__link toc-highlight">Reason to use threads</a></li><li><a href="#user-threads" class="table-of-contents__link toc-highlight">User Threads</a></li><li><a href="#kernel-threads" class="table-of-contents__link toc-highlight">Kernel Threads</a></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li><li><a href="#hybrid-implementations" class="table-of-contents__link toc-highlight">Hybrid Implementations</a></li><li><a href="#thread-management" class="table-of-contents__link toc-highlight">Thread Management</a></li></ul></li><li><a href="#process-scheduling-1" class="table-of-contents__link toc-highlight">Process Scheduling</a><ul><li><a href="#completely-fair-scheduler" class="table-of-contents__link toc-highlight">Completely fair scheduler</a></li><li><a href="#multi-processor-scheduling" class="table-of-contents__link toc-highlight">Multi-processor scheduling</a></li></ul></li><li><a href="#concurrency" class="table-of-contents__link toc-highlight">Concurrency</a><ul><li><a href="#race-conditions" class="table-of-contents__link toc-highlight">Race Conditions</a></li><li><a href="#deadlocks" class="table-of-contents__link toc-highlight">Deadlocks</a></li><li><a href="#petersons-solution" class="table-of-contents__link toc-highlight">Peterson&#39;s Solution</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">a Dan Lee creations. 
 2023©</div></div></div></footer></div>
<script src="/assets/js/runtime~main.33dbd15c.js"></script>
<script src="/assets/js/main.b4c045b6.js"></script>
</body>
</html>